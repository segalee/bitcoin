import{r as _,o as i,c as l,a as c,b as u,w as g,p as P,d as R,e as d,t as p,n as H,f as S,g as U,F as j,h as N,i as E,v as k,j as K,C as J,L as Y,k as W,l as z,P as X,m as G,q as Q,s as Z,u as tt,x as et,y as nt}from"./vendor.dfab41c5.js";const ot=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};ot();var m=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n};const st={},at=t=>(P("data-v-3f21665e"),t=t(),R(),t),rt={class:"app-header flex space-between"},ct=at(()=>c("h3",null,"Bitcoin",-1)),it=d("Home"),lt=d(" | "),ut=d("Contacts"),dt=d(" | "),_t=d("Statistics");function pt(t,e,n,s,o,r){const a=_("RouterLink");return i(),l("section",rt,[ct,c("nav",null,[u(a,{class:"clean-link",to:"/"},{default:g(()=>[it]),_:1}),lt,u(a,{class:"clean-link",to:"/contact"},{default:g(()=>[ut]),_:1}),dt,u(a,{class:"clean-link",to:"/statistics"},{default:g(()=>[_t]),_:1})])])}var mt=m(st,[["render",pt],["__scopeId","data-v-3f21665e"]]);function ht(t,e){const n=({detail:s})=>{e(s)};return window.addEventListener(t,n),()=>{window.removeEventListener(t,n)}}function ft(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const b={on:ht,emit:ft};window.myBus=b;const vt={data(){return{msg:null,removeEventListener:null}},created(){this.removeEventListener=b.on("show-msg",this.showMsg)},methods:{showMsg(t){this.msg=t,setTimeout(()=>{this.msg=null},3e3)}},destroyed(){this.removeEventListener()}};function gt(t,e,n,s,o,r){return o.msg?(i(),l("section",{key:0,class:H(["user-msg",o.msg.type])},[c("p",null,p(o.msg.txt),1)],2)):S("",!0)}var yt=m(vt,[["render",gt],["__scopeId","data-v-89f8f78a"]]);const $t={components:{AppHeader:mt,UserMsg:yt},async created(){await this.$store.dispatch({type:"loadContacts"})}},wt={class:"app"};function Ct(t,e,n,s,o,r){const a=_("AppHeader"),v=_("RouterView"),h=_("UserMsg");return i(),l("div",wt,[u(a),u(v),u(h)])}var xt=m($t,[["render",Ct]]);const St="modulepreload",M={},Lt="/bitcoin/",Et=function(e,n){return!n||n.length===0?e():Promise.all(n.map(s=>{if(s=`${Lt}${s}`,s in M)return;M[s]=!0;const o=s.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":St,o||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),o)return new Promise((v,h)=>{a.addEventListener("load",v),a.addEventListener("error",h)})})).then(()=>e())};var kt={getUser:bt};function bt(){return{name:"Ochoa Hyde",coins:100,moves:[]}}const I={query:L,get:It,post:Pt,put:Rt,remove:Tt,save:T};function L(t,e=100){let n=JSON.parse(localStorage.getItem(t))||[];return new Promise((s,o)=>{setTimeout(()=>{s(n)},e)})}function It(t,e){return L(t).then(n=>n.find(s=>s._id===e))}function Pt(t,e){return e._id=At(),e.createdAt=Date.now(),L(t).then(n=>(n.push(e),T(t,n),e))}function Rt(t,e){return L(t).then(n=>{const s=n.findIndex(o=>o._id===e._id);return n.splice(s,1,e),T(t,n),e})}function Tt(t,e){return L(t).then(n=>{const s=n.findIndex(o=>o._id===e);n.splice(s,1),T(t,n)})}function T(t,e){localStorage.setItem(t,JSON.stringify(e))}function At(t=5){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<t;s++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}const D="rate",O="market";var V={getRate:Ft,getMarketPrice:Bt};async function Ft(t){try{const n=(await U.get(`https://blockchain.info/tobtc?currency=${t}&value=1`)).data;return await I.save(D,n),n}catch(e){return console.log("err:",e),await I.query(D)}}async function Bt(){try{const e=(await U.get("https://api.blockchain.info/charts/trade-volume?timespan=5months&format=json&cors=true")).data;return console.log("marketPrice:",e),await I.save(O,e),e}catch(t){console.log("err:",t),await I.query(O)}}const Mt={data(){return{user:null,bitcoinRate:null}},async created(){const t=kt.getUser();this.user=t;const e=await V.getRate("USD");this.bitcoinRate=e}},Dt={class:"home-page"},Ot={class:"user-greet flex"},Ut={class:"user-info flex"},Vt=d(" Coins: "),qt=d(" BTC: ");function Ht(t,e,n,s,o,r){return i(),l("section",Dt,[c("div",Ot,[c("p",null,"Hello, "+p(o.user.name)+"!",1)]),c("div",Ut,[c("div",null,[c("p",null,[Vt,c("span",null,p(o.user.coins),1)]),c("p",null,[qt,c("span",null,p(o.bitcoinRate),1)])])])])}var jt=m(Mt,[["render",Ht],["__scopeId","data-v-7301a346"]]);const f={storeToStorage:Nt,loadFromStorage:Kt,getRandomInt:F,getRandomId:Jt,getAvgValues:Yt};function Nt(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function Kt(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function Jt(){var t=Date.now().toString(16),e=F(1e3,9999).toString(16),n=F(1e3,9999).toString(16);return`${n}-${t}-${e}`.toUpperCase()}function F(t,e){var n=t>=e?t+1:e+1,s=t<=e?t:e;return Math.floor(Math.random()*(n-s))+s}function Yt(t){t.splice(150,1);let e=t.length/5,n=[],s=0;for(let r=0;r<5;r++){var o=0;for(let a=s;a<e+s;a++)o+=t[a].y;console.log({avg:o}),o=o/e,n.push(o),s+=30}return console.log({newArr:n}),n}const $={query:x,get:Wt,delete:zt,post:Xt,put:Gt,insert:Qt},w="_id";function x(t){var e=f.loadFromStorage(t);return e||(e=[]),Promise.resolve(e)}async function Wt(t,e){var n=await x(t);return n.find(s=>s[w]===e)}async function zt(t,e){var n=await x(t),s=n.findIndex(o=>o[w]===e);if(s===-1)throw new Error("something went wrong");return n.splice(s,1),f.storeToStorage(t,n),Promise.resolve()}async function Xt(t,e){var n=await x(t);return e[w]=f.getRandomId(),n.push(e),f.storeToStorage(t,n),Promise.resolve(e)}async function Gt(t,e){var n=await x(t);let s=n.findIndex(o=>o[w]===e[w]);if(s===-1)throw new Error("something went wrong");return n[s]=e,f.storeToStorage(t,n),Promise.resolve(e)}async function Qt(t,e){var n=await x(t);return e.forEach(s=>s[w]=f.getRandomId()),n.push(...e),f.storeToStorage(t,n),Promise.resolve()}const C="contacts";var y={query:Zt,get:te,remove:ee,save:ne,getEmptyContact:oe};async function Zt(){let t=await $.query(C);return(!t||!t.length)&&(t=se(),await $.insert(C,t)),t}async function te(t){const e=await $.get(C,t);if(!e)throw new Error("Unknown Contact");return e}function ee(t){return $.delete(C,t)}function ne(t){return t._id?$.put(C,t):$.post(C,t)}function oe(){return{name:"",email:"",phone:""}}function se(){return[A("Ochoa Hyde","ochoa@gmail.com","+1 (968) 593-3824"),A("Lee Segal","segalee17@gmail.com","+(972) 506-947954"),A("May Elgarat","mayyy@gmail.com","+(972) 593-3824")]}function A(t,e,n){return{_id:f.getRandomId(),name:t,email:e,phone:n}}const ae={props:{contact:Object}},q=t=>(P("data-v-24cd35fe"),t=t(),R(),t),re={class:"contact-preview flex column space-evenly"},ce={class:"bold"},ie=q(()=>c("span",{class:"bold"},"Email:",-1)),le=q(()=>c("span",{class:"bold"},"Phone:",-1));function ue(t,e,n,s,o,r){return i(),l("section",re,[c("p",ce,p(n.contact.name),1),c("p",null,[ie,d(" "+p(n.contact.email),1)]),c("p",null,[le,d(" "+p(n.contact.phone),1)])])}var de=m(ae,[["render",ue],["__scopeId","data-v-24cd35fe"]]),_e="/bitcoin/assets/avatar.9f64a561.png";const pe={props:{contacts:Array},components:{ContactPreview:de},methods:{remove(t){this.$emit("remove",t)}}},me=t=>(P("data-v-3d502c9d"),t=t(),R(),t),he={class:"clean-list flex wrap justify-center"},fe=me(()=>c("div",null,[c("img",{src:_e,alt:""})],-1)),ve={class:"actions flex column"},ge=["onClick"],ye=d("Edit"),$e=d("Details");function we(t,e,n,s,o,r){const a=_("ContactPreview"),v=_("RouterLink");return i(),l("section",null,[c("ul",he,[(i(!0),l(j,null,N(n.contacts,h=>(i(),l("li",{key:h._id,class:"flex space-around"},[fe,u(a,{contact:h},null,8,["contact"]),c("div",ve,[c("button",{onClick:nn=>r.remove(h._id)},"X Remove",8,ge),u(v,{to:`/contact/edit/${h._id}`},{default:g(()=>[ye]),_:2},1032,["to"]),u(v,{to:`/contact/${h._id}`},{default:g(()=>[$e]),_:2},1032,["to"])])]))),128))])])}var Ce=m(pe,[["render",we],["__scopeId","data-v-3d502c9d"]]);const xe={data(){return{filterBy:{name:""}}},methods:{setFilter(){this.$emit("set-filter",this.filterBy)}}},Se={class:"flex justify-center"};function Le(t,e,n,s,o,r){return i(),l("section",Se,[E(c("input",{type:"text",placeholder:"Search contact by name...","onUpdate:modelValue":e[0]||(e[0]=a=>o.filterBy.name=a),onInput:e[1]||(e[1]=(...a)=>r.setFilter&&r.setFilter(...a))},null,544),[[k,o.filterBy.name]])])}var Ee=m(xe,[["render",Le],["__scopeId","data-v-6a039748"]]);const ke={components:{ContactFilter:Ee,ContactList:Ce},data(){return{filterBy:null}},methods:{setFilter(t){this.filterBy=t},async removeContact(t){try{await this.$store.dispatch({type:"removeContact",id:t}),b.emit("show-msg",{type:"success",txt:"Removed successfully"})}catch(e){console.log(e),b.emit("show-msg",{type:"error",txt:"Error. Please try again later"})}}},computed:{contacts(){return this.$store.getters.contacts},contactsToShow(){if(!this.filterBy)return this.contacts;const t=new RegExp(this.filterBy.name,"i");return this.contacts.filter(e=>t.test(e.name))}}},be=d("Add a new contact");function Ie(t,e,n,s,o,r){const a=_("RouterLink"),v=_("ContactFilter"),h=_("ContactList");return i(),l("section",null,[u(a,{to:"/contact/edit"},{default:g(()=>[be]),_:1}),u(v,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),u(h,{contacts:r.contactsToShow,onRemove:r.removeContact},null,8,["contacts","onRemove"])])}var Pe=m(ke,[["render",Ie],["__scopeId","data-v-56ad5582"]]);const Re={data(){return{contact:null}},async created(){const{id:t}=this.$route.params;this.contact=await y.get(t)}},Te={key:0,class:"contact-details app-main flex column align-center"},Ae=c("h3",null,"Contact details",-1),Fe=d("Back");function Be(t,e,n,s,o,r){const a=_("RouterLink");return o.contact?(i(),l("section",Te,[Ae,c("p",null,p(o.contact.name),1),c("p",null,p(o.contact.email),1),c("p",null,p(o.contact.phone),1),u(a,{to:"/contact"},{default:g(()=>[Fe]),_:1})])):S("",!0)}var Me=m(Re,[["render",Be]]);const De={data(){return{contactToEdit:null}},async created(){const{id:t}=this.$route.params;t?this.contactToEdit=await y.get(t):this.contactToEdit=y.getEmptyContact()},methods:{async save(){await this.$store.dispatch({type:"saveContact",contact:this.contactToEdit}),this.$router.push("/contact")}},computed:{pageTitle(){const{id:t}=this.$route.params;return t?"Edit contact":"Add contact"}}},Oe={class:"contact-edit app-main"},Ue=c("button",null,"Save",-1);function Ve(t,e,n,s,o,r){return i(),l("section",Oe,[c("h2",null,p(r.pageTitle),1),o.contactToEdit?(i(),l("form",{key:0,onSubmit:e[3]||(e[3]=K((...a)=>r.save&&r.save(...a),["prevent"])),class:"flex column align-center"},[E(c("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.contactToEdit.name=a),type:"text",placeholder:"Name"},null,512),[[k,o.contactToEdit.name]]),E(c("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.contactToEdit.email=a),type:"text",placeholder:"Email"},null,512),[[k,o.contactToEdit.email]]),E(c("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.contactToEdit.phone=a),type:"text",placeholder:"Phone"},null,512),[[k,o.contactToEdit.phone]]),Ue],32)):S("",!0)])}var qe=m(De,[["render",Ve]]);J.register(Y,W,z,X,G);const He={props:{chartdata:Array},data(){return{labels:["5 month","4 month","3 month","2 month","last month"],datasets:[{label:"Bitcoin",data:f.getAvgValues(this.chartdata),borderColor:"#272652",color:"#fff",tension:.1}],options:{title:{text:"Bitcoin"}}}},computed:{chartData(){return{labels:this.labels,datasets:this.datasets}}},components:{LineChart:Q.LineChart}},je={key:0};function Ne(t,e,n,s,o,r){const a=_("LineChart");return i(),l("section",null,[n.chartdata?(i(),l("h1",je,p(n.chartdata.name),1)):S("",!0),u(a,{"chart-data":r.chartData,options:o.options},null,8,["chart-data","options"])])}var Ke=m(He,[["render",Ne]]);const Je={components:{Chart:Ke},data(){return{marketPriceList:null}},async created(){const t=await V.getMarketPrice();console.log("prices.values:",t.values),this.marketPriceList=t.values,console.log("this.marketPriceList:",this.marketPriceList)}},Ye=t=>(P("data-v-dd897f94"),t=t(),R(),t),We={key:0},ze={class:"container"},Xe=Ye(()=>c("h1",null,"statistics",-1));function Ge(t,e,n,s,o,r){const a=_("Chart");return o.marketPriceList?(i(),l("section",We,[c("div",ze,[Xe,u(a,{chartdata:o.marketPriceList},null,8,["chartdata"])])])):S("",!0)}var Qe=m(Je,[["render",Ge],["__scopeId","data-v-dd897f94"]]);const Ze=Z({history:tt("/bitcoin/"),routes:[{path:"/",name:"home",component:jt},{path:"/contact",name:"ContactApp",component:Pe},{path:"/contact/:id",name:"ContactDetails",component:Me},{path:"/contact/edit/:id?",name:"ContactEdit",component:qe},{path:"/statistics",name:"Statistics",component:Qe},{path:"/about",name:"about",component:()=>Et(()=>import("./AboutView.b04bbb77.js"),["assets/AboutView.b04bbb77.js","assets/vendor.dfab41c5.js"])}]});var tn={state:{contacts:null},getters:{contacts(t){return t.contacts}},mutations:{setContacts(t,{contacts:e}){t.contacts=e},removeContact(t,{id:e}){const n=t.contacts.findIndex(s=>s._id===e);t.contacts.splice(n,1)},saveContact(t,{contact:e}){console.log("contactToSave:",e);const n=t.contacts.findIndex(s=>s._id===e._id);n!==-1?t.contacts.splice(n,1,e):t.contacts.push(e)}},actions:{async loadContacts({commit:t}){const e=await y.query();t({type:"setContacts",contacts:e})},async removeContact({commit:t},{id:e}){await y.remove(e),t({type:"removeContact",id:e})},async saveContact({commit:t},{contact:e}){const n=await y.save(e);t({type:"saveContact",contact:n})}}};const en=et({strict:!0,modules:{contactModule:tn}});const B=nt(xt);B.use(Ze);B.use(en);B.mount("#app");export{m as _};
