import{r as p,o as l,c as u,a as r,b as d,w as g,n as b,p as x,d as S,e as _,t as m,f as k,g as V,F as j,h as N,i as I,v as P,j as K,C as J,L as Y,k as W,l as z,P as X,m as G,q as Q,s as Z,u as tt,x as et,y as nt}from"./vendor.dfab41c5.js";const ot=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};ot();var h=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n};const st={data(){return{activeEl:1}},methods:{activate(t){this.activeEl=t}}},at=t=>(x("data-v-22143da8"),t=t(),S(),t),ct={class:"app-header flex space-between"},rt=at(()=>r("h3",null,"Bitcoin",-1)),it=_("Home"),lt=_(" | "),ut=_("Contacts"),dt=_(" | "),_t=_("Statistics");function pt(t,e,n,s,o,a){const c=p("RouterLink");return l(),u("section",ct,[rt,r("nav",null,[d(c,{onClick:e[0]||(e[0]=i=>a.activate(1)),class:b([{active:o.activeEl===1},"clean-link"]),to:"/"},{default:g(()=>[it]),_:1},8,["class"]),lt,d(c,{onClick:e[1]||(e[1]=i=>a.activate(2)),class:b([{active:o.activeEl===2},"clean-link"]),to:"/contact"},{default:g(()=>[ut]),_:1},8,["class"]),dt,d(c,{onClick:e[2]||(e[2]=i=>a.activate(3)),class:b([{active:o.activeEl===3},"clean-link"]),to:"/statistics"},{default:g(()=>[_t]),_:1},8,["class"])])])}var mt=h(st,[["render",pt],["__scopeId","data-v-22143da8"]]);function ht(t,e){const n=({detail:s})=>{e(s)};return window.addEventListener(t,n),()=>{window.removeEventListener(t,n)}}function vt(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const R={on:ht,emit:vt};window.myBus=R;const ft={data(){return{msg:null,removeEventListener:null}},created(){this.removeEventListener=R.on("show-msg",this.showMsg)},methods:{showMsg(t){this.msg=t,setTimeout(()=>{this.msg=null},3e3)}},destroyed(){this.removeEventListener()}};function gt(t,e,n,s,o,a){return o.msg?(l(),u("section",{key:0,class:b(["user-msg",o.msg.type])},[r("p",null,m(o.msg.txt),1)],2)):k("",!0)}var yt=h(ft,[["render",gt],["__scopeId","data-v-89f8f78a"]]);const $t={components:{AppHeader:mt,UserMsg:yt},async created(){await this.$store.dispatch({type:"loadContacts"})}},wt={class:"app"};function Ct(t,e,n,s,o,a){const c=p("AppHeader"),i=p("RouterView"),v=p("UserMsg");return l(),u("div",wt,[d(c),d(i),d(v)])}var xt=h($t,[["render",Ct]]);const St="modulepreload",D={},Et="/bitcoin/",kt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(s=>{if(s=`${Et}${s}`,s in D)return;D[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":St,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((i,v)=>{c.addEventListener("load",i),c.addEventListener("error",v)})})).then(()=>e())};var Lt={getUser:bt};function bt(){return{name:"Ochoa Hyde",coins:100,moves:[]}}const T={query:L,get:It,post:Pt,put:Rt,remove:Tt,save:A};function L(t,e=100){let n=JSON.parse(localStorage.getItem(t))||[];return new Promise((s,o)=>{setTimeout(()=>{s(n)},e)})}function It(t,e){return L(t).then(n=>n.find(s=>s._id===e))}function Pt(t,e){return e._id=At(),e.createdAt=Date.now(),L(t).then(n=>(n.push(e),A(t,n),e))}function Rt(t,e){return L(t).then(n=>{const s=n.findIndex(o=>o._id===e._id);return n.splice(s,1,e),A(t,n),e})}function Tt(t,e){return L(t).then(n=>{const s=n.findIndex(o=>o._id===e);n.splice(s,1),A(t,n)})}function A(t,e){localStorage.setItem(t,JSON.stringify(e))}function At(t=5){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<t;s++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}const O="rate",U="market";var q={getRate:Ft,getMarketPrice:Bt};async function Ft(t){try{const n=(await V.get(`https://blockchain.info/tobtc?currency=${t}&value=1`)).data;return await T.save(O,n),n}catch(e){return console.log("err:",e),await T.query(O)}}async function Bt(){try{const e=(await V.get("https://api.blockchain.info/charts/trade-volume?timespan=5months&format=json&cors=true")).data;return console.log("marketPrice:",e),await T.save(U,e),e}catch(t){console.log("err:",t),await T.query(U)}}const Mt={data(){return{user:null,bitcoinRate:null}},async created(){const t=Lt.getUser();this.user=t;const e=await q.getRate("USD");this.bitcoinRate=e}},Dt={class:"home-page"},Ot={class:"user-greet flex"},Ut={class:"user-info flex"},Vt=_(" Coins: "),qt=_(" BTC: ");function Ht(t,e,n,s,o,a){return l(),u("section",Dt,[r("div",Ot,[r("p",null,"Hello, "+m(o.user.name)+"!",1)]),r("div",Ut,[r("div",null,[r("p",null,[Vt,r("span",null,m(o.user.coins),1)]),r("p",null,[qt,r("span",null,m(o.bitcoinRate),1)])])])])}var jt=h(Mt,[["render",Ht],["__scopeId","data-v-7301a346"]]);const f={storeToStorage:Nt,loadFromStorage:Kt,getRandomInt:B,getRandomId:Jt,getAvgValues:Yt};function Nt(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function Kt(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function Jt(){var t=Date.now().toString(16),e=B(1e3,9999).toString(16),n=B(1e3,9999).toString(16);return`${n}-${t}-${e}`.toUpperCase()}function B(t,e){var n=t>=e?t+1:e+1,s=t<=e?t:e;return Math.floor(Math.random()*(n-s))+s}function Yt(t){t.splice(150,1);let e=t.length/5,n=[],s=0;for(let a=0;a<5;a++){var o=0;for(let c=s;c<e+s;c++)o+=t[c].y;console.log({avg:o}),o=o/e,n.push(o),s+=30}return console.log({newArr:n}),n}const $={query:E,get:Wt,delete:zt,post:Xt,put:Gt,insert:Qt},w="_id";function E(t){var e=f.loadFromStorage(t);return e||(e=[]),Promise.resolve(e)}async function Wt(t,e){var n=await E(t);return n.find(s=>s[w]===e)}async function zt(t,e){var n=await E(t),s=n.findIndex(o=>o[w]===e);if(s===-1)throw new Error("something went wrong");return n.splice(s,1),f.storeToStorage(t,n),Promise.resolve()}async function Xt(t,e){var n=await E(t);return e[w]=f.getRandomId(),n.push(e),f.storeToStorage(t,n),Promise.resolve(e)}async function Gt(t,e){var n=await E(t);let s=n.findIndex(o=>o[w]===e[w]);if(s===-1)throw new Error("something went wrong");return n[s]=e,f.storeToStorage(t,n),Promise.resolve(e)}async function Qt(t,e){var n=await E(t);return e.forEach(s=>s[w]=f.getRandomId()),n.push(...e),f.storeToStorage(t,n),Promise.resolve()}const C="contacts";var y={query:Zt,get:te,remove:ee,save:ne,getEmptyContact:oe};async function Zt(){let t=await $.query(C);return(!t||!t.length)&&(t=se(),await $.insert(C,t)),t}async function te(t){const e=await $.get(C,t);if(!e)throw new Error("Unknown Contact");return e}function ee(t){return $.delete(C,t)}function ne(t){return t._id?$.put(C,t):$.post(C,t)}function oe(){return{name:"",email:"",phone:""}}function se(){return[F("Ochoa Hyde","ochoa@gmail.com","+1 (968) 593-3824"),F("Lee Segal","segalee17@gmail.com","+(972) 506-947954"),F("May Elgarat","mayyy@gmail.com","+(972) 593-3824")]}function F(t,e,n){return{_id:f.getRandomId(),name:t,email:e,phone:n}}const ae={props:{contact:Object}},H=t=>(x("data-v-791a45a2"),t=t(),S(),t),ce={class:"contact-preview flex column space-evenly"},re={class:"bold"},ie=H(()=>r("span",{class:"bold"},"Email:",-1)),le=H(()=>r("span",{class:"bold"},"Phone:",-1));function ue(t,e,n,s,o,a){return l(),u("section",ce,[r("p",re,m(n.contact.name),1),r("p",null,[ie,_(" "+m(n.contact.email),1)]),r("p",null,[le,_(" "+m(n.contact.phone),1)])])}var de=h(ae,[["render",ue],["__scopeId","data-v-791a45a2"]]),_e="/bitcoin/assets/avatar.9f64a561.png";const pe={props:{contacts:Array},components:{ContactPreview:de},methods:{remove(t){this.$emit("remove",t)}}},me=t=>(x("data-v-50f2219f"),t=t(),S(),t),he={class:"clean-list flex wrap justify-center"},ve=me(()=>r("div",null,[r("img",{src:_e,alt:""})],-1)),fe={class:"actions flex column"},ge=["onClick"],ye=_("Edit"),$e=_("Details");function we(t,e,n,s,o,a){const c=p("ContactPreview"),i=p("RouterLink");return l(),u("section",null,[r("ul",he,[(l(!0),u(j,null,N(n.contacts,v=>(l(),u("li",{key:v._id,class:"flex space-around"},[ve,d(c,{contact:v},null,8,["contact"]),r("div",fe,[r("button",{onClick:cn=>a.remove(v._id)},"X Remove",8,ge),d(i,{to:`/contact/edit/${v._id}`},{default:g(()=>[ye]),_:2},1032,["to"]),d(i,{to:`/contact/${v._id}`},{default:g(()=>[$e]),_:2},1032,["to"])])]))),128))])])}var Ce=h(pe,[["render",we],["__scopeId","data-v-50f2219f"]]);const xe={data(){return{filterBy:{name:""}}},methods:{setFilter(){this.$emit("set-filter",this.filterBy)}}},Se={class:"flex justify-center"};function Ee(t,e,n,s,o,a){return l(),u("section",Se,[I(r("input",{type:"text",placeholder:"Search contact by name...","onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy.name=c),onInput:e[1]||(e[1]=(...c)=>a.setFilter&&a.setFilter(...c))},null,544),[[P,o.filterBy.name]])])}var ke=h(xe,[["render",Ee],["__scopeId","data-v-5acaea8f"]]);const Le={components:{ContactFilter:ke,ContactList:Ce},data(){return{filterBy:null}},methods:{setFilter(t){this.filterBy=t},async removeContact(t){try{await this.$store.dispatch({type:"removeContact",id:t}),R.emit("show-msg",{type:"success",txt:"Removed successfully"})}catch(e){console.log(e),R.emit("show-msg",{type:"error",txt:"Error. Please try again later"})}}},computed:{contacts(){return this.$store.getters.contacts},contactsToShow(){if(!this.filterBy)return this.contacts;const t=new RegExp(this.filterBy.name,"i");return this.contacts.filter(e=>t.test(e.name))}}},be=_("+ Add a new contact");function Ie(t,e,n,s,o,a){const c=p("RouterLink"),i=p("ContactFilter"),v=p("ContactList");return l(),u("section",null,[r("div",null,[d(c,{to:"/contact/edit"},{default:g(()=>[be]),_:1})]),d(i,{onSetFilter:a.setFilter},null,8,["onSetFilter"]),d(v,{contacts:a.contactsToShow,onRemove:a.removeContact},null,8,["contacts","onRemove"])])}var Pe=h(Le,[["render",Ie],["__scopeId","data-v-008176d0"]]);const Re={data(){return{contact:null}},async created(){const{id:t}=this.$route.params;this.contact=await y.get(t)}},Te=t=>(x("data-v-30cb430c"),t=t(),S(),t),Ae={key:0,class:"contact-details app-main flex column align-center"},Fe=Te(()=>r("h3",null,"Contact details",-1)),Be=_("Back");function Me(t,e,n,s,o,a){const c=p("RouterLink");return o.contact?(l(),u("section",Ae,[Fe,r("p",null,m(o.contact.name),1),r("p",null,m(o.contact.email),1),r("p",null,m(o.contact.phone),1),d(c,{to:"/contact"},{default:g(()=>[Be]),_:1})])):k("",!0)}var De=h(Re,[["render",Me],["__scopeId","data-v-30cb430c"]]);const Oe={data(){return{contactToEdit:null}},async created(){const{id:t}=this.$route.params;t?this.contactToEdit=await y.get(t):this.contactToEdit=y.getEmptyContact()},methods:{async save(){await this.$store.dispatch({type:"saveContact",contact:this.contactToEdit}),this.$router.push("/contact")}},computed:{pageTitle(){const{id:t}=this.$route.params;return t?"Edit contact":"Add contact"}}},Ue=t=>(x("data-v-217ebd60"),t=t(),S(),t),Ve={class:"contact-edit app-main"},qe={class:"flex justify-between"},He=Ue(()=>r("button",null,"Save",-1)),je=_("Cancel");function Ne(t,e,n,s,o,a){const c=p("RouterLink");return l(),u("section",Ve,[r("h2",null,m(a.pageTitle),1),o.contactToEdit?(l(),u("form",{key:0,onSubmit:e[3]||(e[3]=K((...i)=>a.save&&a.save(...i),["prevent"])),class:"flex column align-center"},[I(r("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.contactToEdit.name=i),type:"text",placeholder:"Name"},null,512),[[P,o.contactToEdit.name]]),I(r("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.contactToEdit.email=i),type:"text",placeholder:"Email"},null,512),[[P,o.contactToEdit.email]]),I(r("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>o.contactToEdit.phone=i),type:"text",placeholder:"Phone"},null,512),[[P,o.contactToEdit.phone]]),r("div",qe,[He,d(c,{to:"/contact"},{default:g(()=>[je]),_:1})])],32)):k("",!0)])}var Ke=h(Oe,[["render",Ne],["__scopeId","data-v-217ebd60"]]);J.register(Y,W,z,X,G);const Je={props:{chartdata:Array},data(){return{labels:["5 month","4 month","3 month","2 month","last month"],datasets:[{label:"Bitcoin",data:f.getAvgValues(this.chartdata),borderColor:"#272652",color:"#fff",tension:.1}],options:{title:{text:"Bitcoin"}}}},computed:{chartData(){return{labels:this.labels,datasets:this.datasets}}},components:{LineChart:Q.LineChart}},Ye={key:0};function We(t,e,n,s,o,a){const c=p("LineChart");return l(),u("section",null,[n.chartdata?(l(),u("h1",Ye,m(n.chartdata.name),1)):k("",!0),d(c,{"chart-data":a.chartData,options:o.options},null,8,["chart-data","options"])])}var ze=h(Je,[["render",We]]);const Xe={components:{Chart:ze},data(){return{marketPriceList:null}},async created(){const t=await q.getMarketPrice();console.log("prices.values:",t.values),this.marketPriceList=t.values,console.log("this.marketPriceList:",this.marketPriceList)}},Ge=t=>(x("data-v-dd897f94"),t=t(),S(),t),Qe={key:0},Ze={class:"container"},tn=Ge(()=>r("h1",null,"statistics",-1));function en(t,e,n,s,o,a){const c=p("Chart");return o.marketPriceList?(l(),u("section",Qe,[r("div",Ze,[tn,d(c,{chartdata:o.marketPriceList},null,8,["chartdata"])])])):k("",!0)}var nn=h(Xe,[["render",en],["__scopeId","data-v-dd897f94"]]);const on=Z({history:tt("/bitcoin/"),routes:[{path:"/",name:"home",component:jt},{path:"/contact",name:"ContactApp",component:Pe},{path:"/contact/:id",name:"ContactDetails",component:De},{path:"/contact/edit/:id?",name:"ContactEdit",component:Ke},{path:"/statistics",name:"Statistics",component:nn},{path:"/about",name:"about",component:()=>kt(()=>import("./AboutView.2ac36d9a.js"),["assets/AboutView.2ac36d9a.js","assets/vendor.dfab41c5.js"])}]});var sn={state:{contacts:null},getters:{contacts(t){return t.contacts}},mutations:{setContacts(t,{contacts:e}){t.contacts=e},removeContact(t,{id:e}){const n=t.contacts.findIndex(s=>s._id===e);t.contacts.splice(n,1)},saveContact(t,{contact:e}){console.log("contactToSave:",e);const n=t.contacts.findIndex(s=>s._id===e._id);n!==-1?t.contacts.splice(n,1,e):t.contacts.push(e)}},actions:{async loadContacts({commit:t}){const e=await y.query();t({type:"setContacts",contacts:e})},async removeContact({commit:t},{id:e}){await y.remove(e),t({type:"removeContact",id:e})},async saveContact({commit:t},{contact:e}){const n=await y.save(e);t({type:"saveContact",contact:n})}}};const an=et({strict:!0,modules:{contactModule:sn}});const M=nt(xt);M.use(on);M.use(an);M.mount("#app");export{h as _};
